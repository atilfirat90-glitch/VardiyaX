<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:ShiftCraft.Mobile.ViewModels"
             x:Class="ShiftCraft.Mobile.Views.NotificationPreferencesPage"
             x:DataType="vm:NotificationPreferencesViewModel"
             Title="Bildirim AyarlarÄ±"
             BackgroundColor="{StaticResource Gray100}">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="15">
            <!-- Error Message -->
            <Frame IsVisible="{Binding ErrorMessage, Converter={StaticResource StringToBoolConverter}}"
                   BackgroundColor="#FFEBEE"
                   CornerRadius="8"
                   Padding="15">
                <Label Text="{Binding ErrorMessage}" TextColor="#C62828" FontSize="14"/>
            </Frame>

            <!-- Schedule Notifications -->
            <Frame BackgroundColor="White" CornerRadius="10" Padding="15">
                <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                    <Label Grid.Column="0" Text="ðŸ“…" FontSize="24" VerticalOptions="Center"/>
                    <VerticalStackLayout Grid.Column="1" VerticalOptions="Center">
                        <Label Text="Vardiya Bildirimleri" FontSize="14" FontAttributes="Bold"/>
                        <Label Text="Yeni vardiya yayÄ±nlandÄ±ÄŸÄ±nda bildirim al" 
                               FontSize="12" TextColor="{StaticResource Gray500}"/>
                    </VerticalStackLayout>
                    <Switch Grid.Column="2" 
                            IsToggled="{Binding ScheduleNotificationsEnabled}"
                            OnColor="{StaticResource Primary}"/>
                </Grid>
            </Frame>

            <!-- Violation Notifications -->
            <Frame BackgroundColor="White" CornerRadius="10" Padding="15">
                <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                    <Label Grid.Column="0" Text="âš ï¸" FontSize="24" VerticalOptions="Center"/>
                    <VerticalStackLayout Grid.Column="1" VerticalOptions="Center">
                        <Label Text="Ä°hlal Bildirimleri" FontSize="14" FontAttributes="Bold"/>
                        <Label Text="Kural ihlali tespit edildiÄŸinde bildirim al" 
                               FontSize="12" TextColor="{StaticResource Gray500}"/>
                    </VerticalStackLayout>
                    <Switch Grid.Column="2" 
                            IsToggled="{Binding ViolationNotificationsEnabled}"
                            OnColor="{StaticResource Primary}"/>
                </Grid>
            </Frame>

            <!-- Shift Reminders -->
            <Frame BackgroundColor="White" CornerRadius="10" Padding="15">
                <VerticalStackLayout Spacing="10">
                    <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                        <Label Grid.Column="0" Text="ðŸ””" FontSize="24" VerticalOptions="Center"/>
                        <VerticalStackLayout Grid.Column="1" VerticalOptions="Center">
                            <Label Text="Vardiya HatÄ±rlatÄ±cÄ±larÄ±" FontSize="14" FontAttributes="Bold"/>
                            <Label Text="Vardiya baÅŸlamadan Ã¶nce hatÄ±rlatma al" 
                                   FontSize="12" TextColor="{StaticResource Gray500}"/>
                        </VerticalStackLayout>
                        <Switch Grid.Column="2" 
                                IsToggled="{Binding ShiftRemindersEnabled}"
                                OnColor="{StaticResource Primary}"/>
                    </Grid>

                    <!-- Reminder Time Selection -->
                    <Grid ColumnDefinitions="*,Auto" 
                          IsVisible="{Binding ShiftRemindersEnabled}"
                          Margin="40,5,0,0">
                        <Label Text="HatÄ±rlatma zamanÄ±:" 
                               FontSize="13" 
                               TextColor="{StaticResource Gray600}"
                               VerticalOptions="Center"/>
                        <Picker Grid.Column="1"
                                ItemsSource="{Binding ReminderOptions}"
                                SelectedItem="{Binding ReminderHoursBefore}"
                                FontSize="13"
                                WidthRequest="100"/>
                    </Grid>
                    <Label Text="saat Ã¶nce" 
                           FontSize="12" 
                           TextColor="{StaticResource Gray500}"
                           IsVisible="{Binding ShiftRemindersEnabled}"
                           Margin="40,0,0,0"/>
                </VerticalStackLayout>
            </Frame>

            <!-- Save Button -->
            <Button Text="Kaydet"
                    Command="{Binding SaveCommand}"
                    IsEnabled="{Binding IsBusy, Converter={StaticResource InverseBoolConverter}}"
                    BackgroundColor="{StaticResource Primary}"
                    TextColor="White"
                    FontSize="16"
                    HeightRequest="50"
                    CornerRadius="10"
                    Margin="0,20,0,0"/>

            <!-- Loading Indicator -->
            <ActivityIndicator IsRunning="{Binding IsBusy}"
                               IsVisible="{Binding IsBusy}"
                               Color="{StaticResource Primary}"
                               HeightRequest="40"/>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
