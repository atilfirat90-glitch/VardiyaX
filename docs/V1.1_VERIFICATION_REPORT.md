# VardiyaX v1.1 Runtime Verification Report

**Tarih:** 25 AralÄ±k 2025  
**Versiyon:** v1.1-dev  
**Durum:** â³ BUILD REQUIRED

---

## Pre-Verification Status

### Environment Check
| Kontrol | Durum |
|---------|-------|
| Android Emulator | âœ… Running (emulator-5554) |
| Appium Server | âœ… Running (port 4723) |
| v1.0 APK (Baseline) | âœ… Running - Employees page visible |
| v1.1 APK | âš ï¸ BUILD REQUIRED |

### v1.0 Baseline Verification
- âœ… App running: com.vardiyax.mobile
- âœ… Main activity: crc640e0fe095e31d649d.MainActivity
- âœ… Employees page: "3 employees" visible
- âœ… Bottom tabs: Ã‡alÄ±ÅŸanlar, Vardiyalar, Ä°hlaller
- âœ… Hamburger menu: "Open navigation drawer" available

### Code Changes Summary
```
Modified Files:
- AuthService.cs      â†’ Full URL pattern (BaseAddress removed)
- ApiService.cs       â†’ IApiClient migration
- UserService.cs      â†’ IApiClient migration
- AuditService.cs     â†’ IApiClient migration
- PushNotificationHandler.cs â†’ IApiClient migration
- MauiProgram.cs      â†’ DI registration added

New Files:
- IApiClient.cs       â†’ Interface definition
- ApiClient.cs        â†’ Centralized HTTP client
```

---

## Build Instructions

v1.1 APK'yÄ± build etmek iÃ§in:

```bash
# Windows - Visual Studio veya CLI
cd src/ShiftCraft.Mobile
dotnet build -c Release -f net8.0-android

# APK konumu
# src/ShiftCraft.Mobile/bin/Release/net8.0-android/com.vardiyax.mobile-Signed.apk
```

Veya Visual Studio'da:
1. ShiftCraft.Mobile projesini seÃ§
2. Configuration: Release
3. Target: Android
4. Build > Build Solution

---

## Verification Checklist (Build SonrasÄ±)

### PHASE A â€” Clean Runtime Setup
- [ ] Mevcut APK'yÄ± kaldÄ±r: `adb uninstall com.vardiyax.mobile`
- [ ] v1.1 APK'yÄ± yÃ¼kle: `adb install <path-to-v1.1.apk>`
- [ ] App storage temizle: `adb shell pm clear com.vardiyax.mobile`
- [ ] UygulamayÄ± baÅŸlat

### PHASE B â€” Auth & Bootstrap
- [ ] Login: admin / dKhEH5xdy5r7
- [ ] Token acquisition baÅŸarÄ±lÄ±
- [ ] Ana sayfa yÃ¼klendi
- [ ] Logcat'te 401/403 hatasÄ± yok

### PHASE C â€” Core Flow Regression
| Sayfa | Ä°lk YÃ¼kleme | Back | Re-open | Crash |
|-------|-------------|------|---------|-------|
| Employees | â³ | â³ | â³ | â³ |
| Shifts | â³ | â³ | â³ | â³ |
| Violations | â³ | â³ | â³ | â³ |

### PHASE D â€” Hamburger Menu (CRITICAL)
| Sayfa | Ä°lk AÃ§Ä±lÄ±ÅŸ | Back | Re-open | HTTP 200 |
|-------|------------|------|---------|----------|
| User Management | â³ | â³ | â³ | â³ |
| Audit Logs | â³ | â³ | â³ | â³ |
| Notification Settings | â³ | â³ | â³ | â³ |

### PHASE E â€” Network Edge
- [ ] Slow network simulation
- [ ] Network disable/enable
- [ ] Graceful failure
- [ ] Recovery without restart

### PHASE F â€” Log & Observability
- [ ] Centralized base URL usage confirmed
- [ ] No HttpClient.BaseAddress references
- [ ] No NullReferenceException
- [ ] No silent catch blocks

---

## Expected Log Patterns (v1.1)

### Correct (IApiClient)
```
[ApiClient] GET https://shiftcraft-api-prod.azurewebsites.net/api/v1/employee
[ApiClient] Response: 200 OK
```

### Correct (AuthService)
```
[AuthService] POST to: https://shiftcraft-api-prod.azurewebsites.net/api/v1/auth/login
[AuthService] Response Status: OK
```

### Incorrect (Should NOT see)
```
[ApiService] BaseAddress: https://...  âŒ OLD PATTERN
HttpClient.BaseAddress = ...           âŒ OLD PATTERN
```

---

## Logcat Commands

```bash
# TÃ¼m uygulama loglarÄ±nÄ± izle
adb logcat -s mono-stdout:V mono-stderr:V

# Sadece API Ã§aÄŸrÄ±larÄ±nÄ± filtrele
adb logcat | findstr "ApiClient AuthService"

# HatalarÄ± filtrele
adb logcat *:E | findstr "vardiyax"
```

---

## Risk Assessment (Pre-Build)

| Risk | Seviye | AÃ§Ä±klama |
|------|--------|----------|
| DI Resolution | ğŸŸ¢ LOW | Build passed, registration correct |
| Auth Flow | ğŸŸ¢ LOW | AuthService minimal change |
| API Calls | ğŸŸ¡ MEDIUM | All services migrated - runtime test needed |
| Error Handling | ğŸŸ¢ LOW | Centralized in ApiClient |

---

## GO / NO-GO Decision

### Current Status: â³ PENDING BUILD

**Required Steps:**
1. Build v1.1 APK
2. Install on emulator
3. Execute verification checklist
4. Update this document with results

**Decision Criteria:**
- âœ… GO: All phases pass, no crashes, correct log patterns
- âŒ NO-GO: Any crash, 401/403 errors, incorrect URL patterns

---

## Quick Verification Script

Build sonrasÄ± hÄ±zlÄ± test iÃ§in:

```bash
# 1. Mevcut APK'yÄ± kaldÄ±r
adb uninstall com.vardiyax.mobile

# 2. Yeni APK'yÄ± yÃ¼kle
adb install src/ShiftCraft.Mobile/bin/Release/net8.0-android/com.vardiyax.mobile-Signed.apk

# 3. UygulamayÄ± baÅŸlat
adb shell am start -n com.vardiyax.mobile/crc640e0fe095e31d649d.MainActivity

# 4. LoglarÄ± izle
adb logcat -s mono-stdout:V | findstr "ApiClient AuthService"
```

---

*Verification Report v1.0*  
*HazÄ±rlayan: Kiro AI Assistant*
